<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:rich="http://richfaces.org/rich"
	template="../layout/template2.xhtml">


	<ui:define name="head">
		<link href="../css/default.css" rel="stylesheet" type="../text/css" />	
	</ui:define>
	
	<style>
.top {
	vertical-align: top;
}

.info {
	height: 202px;
	overflow: auto;
}
</style>
	<ui:define name="centroT">


		<rich:panel>
			<f:facet name="header">cargaMasivaUsuarios</f:facet>

			<h:form id="fooForm" enctype="multipart/form-data">

				<s:fileUpload id="file" data="#{uploadHandler.file}"
					accept="image/jpg" fileName="#{uploadHandler.nombreArchivo}" />

				<h:commandButton id="upload" value="Upload !!"
					action="#{uploadHandler.handleUpload}"/>
					
			</h:form>

			<h:form id="guardar">
			<s:div>
					<s:decorate id="rolesField" template="../layout/edit.xhtml"
								style="position:absolute;">
								<ui:define name="label">Roles</ui:define>
								<div class="selectOne">
									<h:selectManyCheckbox id="roles" value="#{userAction.roles}"
										layout="pageDirection" styleClass="roles" >
										<s:selectItems value="#{identityManager.listGrantableRoles()}"
											var="_role" label="#{_role}" />
											
									</h:selectManyCheckbox>
								</div>
							</s:decorate>
							<br />
							<br />
							<br />
							<br />
							<br />
							<br />
							<s:decorate id="enabledField" template="../layout/edit.xhtml" style="position:absolute;">
								<ui:define name="label">Habilitar Usuario</ui:define>
								<h:selectBooleanCheckbox id="enabled"
									value="#{userAction.enabled}" />
							</s:decorate>
							<br />
							<br />
							<s:decorate id="facultad" template="../layout/edit.xhtml"
								style="position:absolute;">
								<ui:define name="label">Escuela</ui:define>
								<h:selectOneMenu
									value="#{usuario.enteUniversitarios}"
									id="enteUniversitario" required="true" rendered="true">
									<s:selectItems value="#{listaEntesUniversitariosEscuelas}" var="lista"
										label="#{lista.nombreEnteUniversitario}"/>
									<a4j:support event="onchange" reRender="dos" />
									<s:convertEntity />
								</h:selectOneMenu>
							</s:decorate>
							<br />
							<br />
							<br />
							
							<h:commandButton value="Guardar Usuarios" id ="crearUsuarios" action="#{cargaMasivaUsuariosBean.saveUsuarios()}" styleClass="newuser" rendered="#{s:hasPermission('seam.user', 'create')}"/>
				</s:div>
					</h:form>

			<h:form id="tabla">
				<rich:dataTable value="#{listaUsuariosPreCargada}" var="cap">
					<f:facet name="caption">
						<h:outputText value="Usuarios Precargados" />
					</f:facet>
					<f:facet name="header">
						<h:outputText value="Detalles de Usuarios" />
					</f:facet>
					<rich:column>
						<f:facet name="header">Primer Nombre</f:facet>
						<h:outputText value="#{cap.primerNombre}" />
						<f:facet name="footer">Primer Nombre</f:facet>
					</rich:column>
					<rich:column>
						<f:facet name="header">Segundo Nombre</f:facet>
						<h:outputText value="#{cap.segundoNombre}" />
						<f:facet name="footer">Segundo Nombre</f:facet>
					</rich:column>
					<rich:column>
						<f:facet name="header">Apellidos</f:facet>
						<h:outputText value="#{cap.apellidos}" />
						<f:facet name="footer">Apellidos</f:facet>
					</rich:column>
					<rich:column>
						<f:facet name="header">Codigo</f:facet>
						<h:outputText value="#{cap.codigoUsuarios}" />
						<f:facet name="footer">Codigo</f:facet>
					</rich:column>
										
				</rich:dataTable>
					
			</h:form>
			
		</rich:panel>

	</ui:define>
</ui:composition>